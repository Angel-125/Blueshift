PART
{
	name = wbiS2ContragravityGenerator
	module = Part
	author = Angel-125

	MODEL
	{
		model = WildBlueIndustries/Blueshift/Parts/Engine/WarpTech/s2WarpCore
	}

	rescaleFactor = 1

	node_stack_top = 0.0, 1.875, 0.0, 0.0, 1.0, 0.0, 2
	node_stack_bottom = 0.0, -1.875, 0.0, 0.0, -1.0, 0.0, 2
	node_attach = 1.25, 0.0, 0.0, 1.0, 0.0, 0.0, 1

	TechRequired = wbiSaucerTechnologies

	category = Engine
	subcategory = 0
	entryCost = 250000
	cost = 125000

	title = S-2 Contragravity Generator
	manufacturer = <CLASSIFIED>
	description = This generator warps space-time to counteract the pull of gravity. The contragravity effect does not affect the craft's inertial mass or delta-v.
	attachRules = 1,1,1,1,0
	mass = 4
	dragModelType = none
	maximum_drag = 0.02
	minimum_drag = 0.02
	angularDrag = 0.2
	stackSymmetry = 2
	crashTolerance = 50
	thermalMassModifier = 8.0
	emissiveConstant = 0.95
	maxTemp = 2000
	explosionPotential = 0.1
	fuelCrossFeed = True
	breakingForce = 500000
	breakingTorque = 500000
	bulkheadProfiles = size2
	tags = cck-Blueshift warp contragravity graviolium

	// Graviolium is normally not a tweakable resource, meaning you have to fill up your tanks while in flight.
	// Without Kerbal Flying Saucers, the only way to get the resource is to mine asteroids.
	// But this cheat lets you tweak the resource in the editor.
	MODULE
	{
		name = WBIResourceTweaker
		resourceName = Graviolium
		tweakEnabledName = CHEAT: Enable Graviolium tweak
		tweakDisabledName = CHEAT: Disable Graviolium tweak
	}

	MODULE
	{
		name = WBIAnimatedTexture
//		debugMode = true

		// ID of the module so we can distinguish between several animated textures in one part.
		// This animated texture is controlled by the generator.
		moduleID = contragravGenerator

		// Name of transform whose texture we will animate
		textureTransformName = warpCorePlasma

		// The part module will look for <name>1, <name>2, etc. until it can't find images in numeric sequence.
		// Don't include the sequence number here.
		// You can animate both diffuse and emissive textures. You don't need them to have the same number of diffuse and emissive images.
//		animatedDiffuseTexture =

		animatedEmissiveTexture = WildBlueIndustries/Blueshift/Parts/Engine/WarpTech/WarpPlasma

		// Can be zero
		minFramesPerSecond = 15

		// Must be greater than zero. 
		// NOTE: 50 is the fastest that we can go due to how many updates per second we get. 50 is the default value.
		maxFramesPerSecond = 50

		// Emissive animation fades when animation throttle is at minimum.
		fadesAtMinThrottle = false

		// How many seconds until the emissive texture is fully visible/hidden
		emissiveFadeTime = 2
	}

	// Generators are just like the stock resource converter, except that this one can control animated textures and/or Effects.
	// This generator produces the GravityWaves that power warp coils by consuming Graviolium and FusionPellets.
	MODULE
	{
		name = WBIContragravityGenerator

		// A percentage value between 10 and 100, where 100% cancels all the local gravity.
		maxGForceCancellation = 95

		groupName = #LOC_BLUESHIFT_contragravityGroup

		// This also replaces the name shown in the editor.
		ConverterName = Contragravity Generator

		// Setting this to the same value as WBIWarpEngine's warpPowerGeneratorID field lets the warp engine control the generator.
		textureModuleID = contragravGenerator

		// Short description of the module as displayed in the editor.
		moduleDescription = Counteracts the pull of gravity.

		StartActionName = Activate Contragravity
		StopActionName = Deactivate Contragravity
		ToggleActionName = Toggle Contragravity
		
		runningEffect = running

		// These input values are calibrated for a 1-tonne craft in a 1-gravity environment.
		// They will be scaled up depending on vessel mass, and scaled up/down depending upon the pull of gravity.
		INPUT_RESOURCE
		{
			ResourceName = Graviolium
			Ratio = 0.00001
			FlowMode = STAGE_PRIORITY_FLOW
		}
		IUTPUT_RESOURCE
		{
			ResourceName = ElectricCharge
			Ratio = 3
			DumpExcess = true
			FlowMode = ALL_VESSEL
		}
		OUTPUT_RESOURCE:NEEDS[WildBlueIndustries/FlyingSaucers]
		{
			ResourceName = StaticCharge
			Ratio = 0.0001
			DumpExcess = false
			FlowMode = ALL_VESSEL
		}
	}

	RESOURCE
	{
		name = Graviolium
		amount = 0
		maxAmount = 48
	}

	RESOURCE:NEEDS[WildBlueIndustries/FlyingSaucers]
	{
		name = StaticCharge
		amount = 0
		maxAmount = 450
	}

	EFFECTS
	{	
		running
		{
			AUDIO
			{
				channel = Ship
				clip = WildBlueIndustries/Blueshift/FX/WarpEngineRunning2
				volume = 0.0 0.0
				volume = 1.0 2.5
				loop = true
			}
		}
	}
}